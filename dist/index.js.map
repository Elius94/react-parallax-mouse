{"version":3,"file":"index.js","sources":["../src/Container.tsx","../src/Child.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\r\nimport { Motion, spring } from 'react-motion';\r\n\r\ninterface Props {\r\n    children: JSX.Element[] | JSX.Element;\r\n    resetOnLeave?: boolean;\r\n    useWindowMouseEvents?: boolean;\r\n    inverted?: boolean;\r\n    containerStyles?: React.CSSProperties;\r\n    className?: string;\r\n}\r\n\r\n// Helper Function to check if a Variable is a Function\r\nconst isFunction: (value: any) => boolean = value => value && (Object.prototype.toString.call(value) === \"[object Function]\" || \"function\" === typeof value || value instanceof Function);\r\n\r\nconst MouseParallaxContainer = ({ children, resetOnLeave, useWindowMouseEvents, inverted, containerStyles, className }: Props) => {\r\n\r\n    // Convert one Child cases into one dimensional Array to map over\r\n    if (!Array.isArray(children))\r\n        children = [children];\r\n\r\n    const [offset, setOffset] = useState([0, 0]);\r\n    // Container Reference with Callback to use it inside of useEffect\r\n    const [containerRef, setContainerRef] = useState<{ current: HTMLDivElement | null }>({ current: null });\r\n    const containerRefWithCallback = useCallback(node => { if (node !== null) { setContainerRef({ current: node }); } }, []);\r\n\r\n    const getMousePosition = useCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent> | MouseEvent) => {\r\n\r\n        var rect = (containerRef.current) ? containerRef.current.getBoundingClientRect() : { left: 0, top: 0 };\r\n        return {\r\n            x: e.clientX - rect.left,\r\n            y: e.clientY - rect.top\r\n        };\r\n\r\n    }, [containerRef])\r\n\r\n    const mouseMovementHandler = useCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent> | MouseEvent) => {\r\n        if (containerRef.current) {\r\n            var containerHeight = containerRef.current.clientHeight;\r\n            var containerWidth = containerRef.current.clientWidth;\r\n            var mousePosition = getMousePosition(e);\r\n            var relativeToCenter = [\r\n                containerWidth / 2 - mousePosition.x,\r\n                containerHeight / 2 - mousePosition.y\r\n            ];\r\n            if (inverted) relativeToCenter = [relativeToCenter[0] * -1, relativeToCenter[1] * -1];\r\n            setOffset(relativeToCenter);\r\n        }\r\n    }, [containerRef, getMousePosition, inverted]);\r\n\r\n    useEffect(() => {\r\n        if (useWindowMouseEvents && containerRef.current) {\r\n            window.addEventListener('mousemove', mouseMovementHandler, false);\r\n            if (resetOnLeave)\r\n                window.addEventListener('mouseout', () => setOffset([0, 0]), false);\r\n        }\r\n        return () => {\r\n            window.removeEventListener('mousemove', mouseMovementHandler, false);\r\n            if (resetOnLeave)\r\n                window.removeEventListener('mouseout', () => setOffset([0, 0]), false);\r\n        }\r\n    }, [containerRef, mouseMovementHandler, resetOnLeave, useWindowMouseEvents]);\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className={(className) && className}\r\n                id=\"mouse-parallax-container\"\r\n                style={{ overflow: 'hidden', position: 'relative', ...containerStyles }}\r\n                ref={containerRefWithCallback}\r\n                onMouseMove={(!useWindowMouseEvents) ? mouseMovementHandler : () => { }}\r\n                onMouseLeave={(resetOnLeave && !useWindowMouseEvents) ? (() => setOffset([0, 0])) : () => null}\r\n            >\r\n                {children.map(\r\n                    (child, index) => (\r\n                        (child) && (\r\n\r\n                            <Motion key={child.key || index} style={{\r\n                                x: spring(offset[0], child.props.springConfig),\r\n                                y: spring(offset[1], child.props.springConfig),\r\n                            }}>\r\n                                {animationOffset => {\r\n\r\n                                    // Update Style Injection\r\n                                    var [transition, transform, rest] = [\"\", \"\", {}];\r\n\r\n                                    if (child.props.updateStyles) {\r\n                                        if (isFunction(child.props.updateStyles))\r\n                                            // Middleware Function\r\n                                            ({ transition=\"\", transform=\"\", ...rest } = child.props.updateStyles(\r\n                                                {\r\n                                                    \"container\": (containerRef.current) ? { x: containerRef.current.clientWidth, y: containerRef.current.clientHeight } : { x: 0, y: 0 },\r\n                                                    \"px\": animationOffset,\r\n                                                    \"percentage\": (containerRef.current) ? { x: animationOffset.x / containerRef.current.clientWidth * 2 * 100, y: animationOffset.y / containerRef.current.clientHeight * 2 * 100 } : { x: 0, y: 0 }\r\n                                                }\r\n                                            ));\r\n                                        else\r\n                                            // CSS Style Object\r\n                                            ({ transition=\"\", transform=\"\", ...rest } = child.props.updateStyles);\r\n                                    }\r\n\r\n                                    // Apply Styles to each Child\r\n                                    return (\r\n                                        <div\r\n                                            className={(child.props.className) && child.props.className}\r\n                                            style={\r\n                                                {\r\n                                                    willChange: \"transform\",\r\n                                                    transition: `transform 1e-7s linear${(transition) && \", \"}${transition}`,\r\n                                                    transform: `translateX(${animationOffset.x * (child.props.factorX || 0)}px) translateY(${animationOffset.y * (child.props.factorY || 0)}px)${transform}`,\r\n                                                    ...rest,\r\n                                                }\r\n                                            }>\r\n                                            {child}\r\n                                        </div>\r\n                                    )\r\n\r\n                                }}\r\n                            </Motion>\r\n\r\n                        )\r\n                    )\r\n                )}\r\n\r\n            </div>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nexport default MouseParallaxContainer;","import React from 'react';\r\nimport { SpringHelperConfig } from 'react-motion';\r\nimport { Middleware } from './interfaces';\r\n\r\ninterface Props {\r\n    factorX?: number;\r\n    factorY?: number;\r\n    springConfig?: SpringHelperConfig;\r\n    children?: JSX.Element | JSX.Element[];\r\n    className?: string;\r\n    updateStyles?: Middleware | React.CSSProperties;\r\n}\r\n\r\nconst MouseParallaxChild = ({ children }: Props) => (<> {children} </>);\r\n\r\nexport default MouseParallaxChild;"],"names":["useState","useCallback","useEffect","React","Motion","spring"],"mappings":"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"}